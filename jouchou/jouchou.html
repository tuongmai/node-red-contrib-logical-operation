<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
<script type="text/javascript" src="http://d3js.org/d3-selection-multi.v0.4.min.js"></script>

<script type="text/javascript">
RED.nodes.registerType('jouchou', {
  category: 'logical operation',
  color: '#dbf573',
  defaults: {
    name: { value: '' },
    minimumCondition: { value: 0, require: true },
    count: { value: 0 },
    current: { value: {} }
  },
  inputs: 1,
  outputs: 1,
  icon: 'function.png',
  label: function () {
    return this.name || "冗長";
  },
  oneditprepare: function () {
    $("#node-input-minimumCondition").typedInput({
      type:"num",
      typeField: "#node-input-minimumCondition-type"
    })
  }
});
</script>

<script type="text/x-red" data-template-name="jouchou">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-minimumCondition"><i class="fa fa-tag"></i> Minimum conditions</label>
    <input type="text" id="node-input-minimumCondition" placeholder="Number of minimum required conditions" required>
    <input type="hidden" id="node-input-minimumCondition-type">
  </div>
  <div class="form-tips">
    <span><i class="fa fa-info-circle"></i> The 冗長 node outputs true when more than presetted number of inputs conditions are met.</span>
  </div>
</script>
